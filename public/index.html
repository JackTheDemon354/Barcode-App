<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Barcode Shopping Cart</title>
  <style>
    body { font-family: Calibri, Comic Sans MS; max-width: 600px; margin: auto; padding: 20px; }
    input, button { font-size: 16px; padding: 8px; margin: 5px 0; width: 100%; }
    #cart div { margin-bottom: 10px; }
    #cart button { margin-left: 5px; }
    .item-line { display: flex; align-items: center; justify-content: space-between; }
  </style>
</head>
<body>

<h1>üõí Barcode Shopping Cart</h1>

<!-- Manual add form -->
<h2>Add Product Manually</h2>
<input id="manual-barcode" placeholder="Barcode" />
<input id="manual-name" placeholder="Product Name" />
<input id="manual-price" placeholder="Price" type="number" step="0.01" />
<button id="manual-add-btn">Add to Cart</button>

<hr />

<!-- Cart display -->
<h2>Your Cart</h2>
<div id="cart"></div>

<script>
  // Cart data
  const cart = [];

  // Add product to cart (either scanned or manual)
  function addToCart(item) {
    const existing = cart.find(i => i.barcode === item.barcode);
    if (existing) {
      existing.quantity += 1;
    } else {
      cart.push({ ...item, quantity: 1 });
    }
    updateCartDisplay();
  }

  // Update cart UI and total
  function updateCartDisplay() {
    const container = document.getElementById("cart");
    container.innerHTML = "";
    let total = 0;

    cart.forEach((item, i) => {
      total += parseFloat(item.price) * item.quantity;

      const div = document.createElement("div");
      div.className = "item-line";
      div.innerHTML = `
        <span>${item.name} ($${item.price}) √ó ${item.quantity}</span>
        <span>
          <button onclick="decreaseQty(${i})">‚ûñ</button>
          <button onclick="increaseQty(${i})">‚ûï</button>
          <button onclick="removeFromCart(${i})">‚ùå</button>
        </span>
      `;
      container.appendChild(div);
    });

    if(cart.length === 0) {
      container.innerHTML = "<i>Your cart is empty</i>";
    } else {
      const totalDiv = document.createElement("div");
      totalDiv.style.marginTop = "15px";
      totalDiv.style.fontWeight = "bold";
      totalDiv.innerText = `üßÆ Total: $${total.toFixed(2)}`;
      container.appendChild(totalDiv);
    }
  }

  // Quantity buttons logic
  window.increaseQty = (i) => {
    cart[i].quantity += 1;
    updateCartDisplay();
  };

  window.decreaseQty = (i) => {
    if (cart[i].quantity > 1) {
      cart[i].quantity -= 1;
    } else {
      cart.splice(i, 1);
    }
    updateCartDisplay();
  };

  window.removeFromCart = (i) => {
    cart.splice(i, 1);
    updateCartDisplay();
  };

  // Manual add button
  document.getElementById("manual-add-btn").addEventListener("click", () => {
    const barcode = document.getElementById("manual-barcode").value.trim();
    const name = document.getElementById("manual-name").value.trim();
    const price = document.getElementById("manual-price").value.trim();

    if (!barcode || !name || !price || isNaN(price) || parseFloat(price) <= 0) {
      alert("Please enter valid barcode, name and positive price.");
      return;
    }

    addToCart({ barcode, name, price: parseFloat(price).toFixed(2) });

    // Clear inputs
    document.getElementById("manual-barcode").value = "";
    document.getElementById("manual-name").value = "";
    document.getElementById("manual-price").value = "";
  });

  // Init cart UI empty
  updateCartDisplay();
</script>

</body>
</html>
